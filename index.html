<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Traffic Flows VBZ</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />


<!--- libraries -->
  <script src='https://api.mapbox.com/mapbox-gl-js/v1.11.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v1.11.0/mapbox-gl.css' rel='stylesheet' />

  <link rel="stylesheet" type="text/css" href="styles/styles-vbz.css">

  <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>


<body>

<!--- banner-->
  <div class="bannerimage">
    <div class="bannertext">
      <h1>Verkehrsfl√ºsse VBZ</h1>
    </div>
  </div>


<!--- map object-->
  <div id='map' style='width: 100%; height: 80%;'></div>


  <!-- legend -->
  <div class='session'>
    <h2>Casualty</h2>
    <div class='row colors'>
    </div>
    <div class='row labels'>
      <div class='label'>0</div>
      <div class='label'>1</div>
      <div class='label'>2</div>
      <div class='label'>3</div>
      <div class='label'>4</div>
      <div class='label'>5+</div>
    </div>
  </div>



<!-- map initialization -->

<script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiYm91bnRhbiIsImEiOiJpSXVpaU1BIn0.pzuLQeLdLb3bRoYeQNc9jA';
    var map = new mapboxgl.Map({
      container: 'map',
      center: [8.539261, 47.376166],
      zoom: 14,
      //minZoom: 12,
      //maxZoom: 16,
      style: 'mapbox://styles/bountan/cjv50ji2u02u61fqsyujklffl',
      //maxBounds: [[8.411615, 47.326402], [8.664531, 47.449721]]
    });

// map controls
    var scale = new mapboxgl.ScaleControl({
    maxWidth: 150,
    unit: 'metric'
    });
    map.addControl(scale);

    map.addControl(new mapboxgl.FullscreenControl());

//NEW MAP
// based on earthquakes

map.on('load', function() {
  map.addLayer({
    id: 'vbzjson',
    type: 'line',
    source: {
      type: 'geojson',
      data: 'https://bountan.github.io/vbz-flow-concept/data/vbzjson_cut.geojson'
    },
    paint: {


        'line-width': [

          'interpolate', ['linear'], ['zoom'],
            13, ['/',   ['step',
                  ['get', 'occmax'],
                  0.5, 0,
                  2, 15,
                  4, 150,
                  8, 500,
                  11, 1000,
                  15
                ], 20],

            15, ['/', ['step',
                  ['get', 'occmax'],
                  0.5, 0,
                  2, 15,
                  4, 150,
                  8, 500,
                  11, 1000,
                  15
                ], 0.75],
          ],

      'line-color': [
      'step',
      ['get', 'loadmean'],
      '#328abf', 0,
      '#68c4a7', 0.1,
      '#e1e85d', 0.2,
      '#faac5f', 0.6,
      '#d63e4f'
      ],




    }
  });
});





</script>

/*
map.on('load', function() {
map.addSource('route', {
'type': 'geojson',
'data': 'https://bountan.github.io/vbz-flow-concept/data/h_test.geojson'
});

map.addLayer({
'id': 'route',
'type': 'line',
'source': 'route',
'layout': {
'line-join': 'round',
'line-cap': 'round'
},

'paint': {

  'line-width': [

    'interpolate', ['linear'], ['zoom'],
      13, ['/',   ['step',
            ['get', 'Besetzung_Max'],
            0.5, 0,
            2, 15,
            4, 150,
            8, 500,
            11, 1000,
            15
          ], 20],

      15, ['/', ['step',
            ['get', 'Besetzung_Max'],
            0.5, 0,
            2, 15,
            4, 150,
            8, 500,
            11, 1000,
            15
          ], 0.75],
    ],

'line-color': [
'step',
['get', 'Auslastung_Mean'],
'#328abf', 0,
'#68c4a7', 0.1,
'#e1e85d', 0.2,
'#faac5f', 0.6,
'#d63e4f'
],
}
});
});

*/



</body>

</html>
