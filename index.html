<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

<!--- css & js -->
  <script src='https://api.mapbox.com/mapbox-gl-js/v1.11.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v1.11.0/mapbox-gl.css' rel='stylesheet' />

  <link rel = "stylesheet" href = "http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"/>
  <script src = "http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>

  <link rel="stylesheet" type="text/css" href="styles/styles-vbz.css">

<!--- data -->


<body>

<!--- banner-->
  <div class="bannerimage">
    <div class="bannertext">
      <h1>Verkehrsfl√ºsse VBZ</h1>
    </div>
  </div>


<!--- map object-->
  <div id='map' style='width: 100%; height: 80%;'></div>
  <script>




    mapboxgl.accessToken = 'pk.eyJ1IjoiYm91bnRhbiIsImEiOiJpSXVpaU1BIn0.pzuLQeLdLb3bRoYeQNc9jA';
    var map = new mapboxgl.Map({
      container: 'map',
      center: [8.539261, 47.376166],
      zoom: 14,
      minZoom: 12,
      maxZoom: 16,
      style: 'mapbox://styles/bountan/cjv50ji2u02u61fqsyujklffl',
      //maxBounds: [[8.411615, 47.326402], [8.664531, 47.449721]]
    });

//scale

var scale = new mapboxgl.ScaleControl({
maxWidth: 150,
unit: 'metric'
});
map.addControl(scale);

map.addControl(new mapboxgl.FullscreenControl());


map.on('load', function() {
map.addSource('route', {
'type': 'geojson',
'data': 'https://bountan.github.io/vbz-flow-concept/data/h_test.geojson'
});

map.addLayer({
'id': 'route',
'type': 'line',
'source': 'route',
'layout': {
'line-join': 'round',
'line-cap': 'round'
},

/*

["step",
    input: number,
    stop_output_0: OutputType,
    stop_input_1: number, stop_output_1: OutputType,
    stop_input_n: number, stop_output_n: OutputType, ...
]: OutputType



'line-color': '#F7455D'


  'step', ['get', 'Auslastung_Mean'],
    '#4287f5', 0.2,
    '#42f587', 0.4,
    '#f5f542', 0.6,
  ]

'line-color': [
'step',
['get', 'point_count'],
'#51bbd6',
100,
'#f1f075',
750,
'#f28cb1'
],


'line-width': [

  'interpolate', ['linear'], ['zoom'],
        12, ['/', ['get', 'Besetzung_Mean'], 40],
        16, ['/', ['get', 'Besetzung_Mean'], 5],
  ],


*/
'paint': {

  'line-width': [

    'interpolate', ['linear'], ['zoom'],
      13, ['/',   ['step',
            ['get', 'Besetzung_Max'],
            0.5, 0,
            2, 15,
            4, 150,
            8, 500,
            11, 1000,
            15
          ], 20],

      15, ['/', ['step',
            ['get', 'Besetzung_Max'],
            0.5, 0,
            2, 15,
            4, 150,
            8, 500,
            11, 1000,
            15
          ], 0.75],
    ],







// Use a get expression (https://docs.mapbox.com/mapbox-gl-js/style-spec/#expressions-get)
// to set the line-color to a feature property value.
'line-color': [
'step',
['get', 'Auslastung_Mean'],
'#328abf', 0,
'#68c4a7', 0.1,
'#e1e85d', 0.2,
'#faac5f', 0.6,
'#d63e4f'
],








}
});
});






  </script>

</body>

</html>
